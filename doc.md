# Документация к проекту

## Описание
Telegram-бот предназначен для управления участниками чатов, мониторинга активности и упрощения взаимодействия с пользователями. Он использует базу данных SQLite для хранения информации и предоставляет ряд полезных команд.

---

## Структура проекта

- **`main.py`**: Основной файл с логикой бота, обработкой команд и событий.
- **`bd-clean.py`**: Скрипт для удаления данных о неактивных чатах.
- **`makeBD.py`**: Скрипт для создания структуры базы данных.
- **`config.py`**: Файл конфигурации с токеном бота.

---

## Установка и запуск

### Требования
- Python 3.9 или выше
- Установленные библиотеки из файла `requirements.txt`

### Шаги установки

1. Клонируйте проект или скачайте файлы.
2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
3. Создайте файл `config.py` и укажите токен вашего бота:
   ```python
   API_TOKEN = "ВАШ_ТОКЕН_БОТА"
   ```
4. Инициализируйте базу данных:
   ```bash
   python makeBD.py
   ```
5. Запустите бота:
   ```bash
   python main.py
   ```

---

## Использование

### Доступные команды

- **`/start`**: Регистрация пользователя или чата, вывод приветственного сообщения.
- **`/mention_all`**: Упоминание всех участников чата.
- **`/help`**: Вывод справочной информации о командах.
- **`/last_interaction`**: Показывает время последней активности в чате.
- **`/remove_chat_users`**: Удаляет всех пользователей и данные о чате из базы данных.

### Удаление неактивных чатов
Для удаления данных о чатах, которые не были активны более года, выполните:
```bash
python bd-clean.py
```

---

## Структура базы данных

База данных `users.db` создается автоматически и состоит из двух таблиц:

1. **`users`**:
   - `user_id` — ID пользователя.
   - `username` — Имя пользователя.
   - `chat_id` — ID чата.

2. **`date`**:
   - `chat_id` — ID чата.
   - `date` — Дата последней активности (в формате `DD.MM.YYYY-HH:MM`).

---

## Примеры работы

1. После добавления бота в чат и выполнения команды `/start` он сохранит информацию о пользователе в базу данных.
2. Команда `/mention_all` упоминает всех участников чата, зарегистрированных в базе.
3. Если чат не проявлял активности более года, скрипт `bd-clean.py` удалит данные о нём из базы.

---
